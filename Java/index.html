<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.1.7"><title>Java 笔记 - Notes</title><link rel=stylesheet href=../assets/stylesheets/main.4c7052ca.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#java class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title=Notes class="md-header-nav__button md-logo" aria-label=Notes> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Notes </span> <span class="md-header-nav__topic md-ellipsis"> Java 笔记 </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class="md-tabs__link md-tabs__link--active"> Home </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Notes class="md-nav__button md-logo" aria-label=Notes> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 修饰符和访问权限 </a> <nav class=md-nav aria-label=修饰符和访问权限> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 类修饰符 </a> <nav class=md-nav aria-label=类修饰符> <ul class=md-nav__list> <li class=md-nav__item> <a href=#local-class class=md-nav__link> Local Class 摘要 </a> </li> <li class=md-nav__item> <a href=#anonymous-class class=md-nav__link> Anonymous Class 摘要 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 字段修饰符 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 方法修饰符 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lambda class=md-nav__link> Lambda 表达式 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 方法链接 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 任意参数个数 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 方法引用 </a> <nav class=md-nav aria-label=方法引用> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 引用静态方法 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 引用特定对象的实例方法 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 引用构造函数 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#package class=md-nav__link> Package 摘要 </a> <nav class=md-nav aria-label="Package 摘要"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#package_1 class=md-nav__link> 使用 package 的代码组织形式 </a> </li> <li class=md-nav__item> <a href=#package_2 class=md-nav__link> 使用 package 的成员 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 当域名特殊时，包名的约定 </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 源文件组织方法 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#glob class=md-nav__link> Glob 语法 </a> </li> <li class=md-nav__item> <a href=#exception class=md-nav__link> Exception 摘要 </a> <nav class=md-nav aria-label="Exception 摘要"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#exception_1 class=md-nav__link> Exception 的种类 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 泛型 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=java>Java 笔记<a class=headerlink href=#java title="Permanent link">&para;</a></h1> <h2 id=_1>修饰符和访问权限<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>访问级别修饰符确定其他类是否可以使用特定字段或调用特定方法。</p> <h3 id=_2>类修饰符<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <ul> <li> <p>public：可以被任意 class 访问。一个程序的主类必须是公共类。</p> </li> <li> <p>abstract：抽象类。没有实现的方法，需要子类实现。</p> </li> <li> <p>final：不能被继承。</p> </li> <li> <p>friendly 或 没有修饰符：默认的修饰符，同一 package 的 class 可访问。</p> </li> </ul> <p>还可以用 private 或 protected 修饰 inner class。</p> <p>非静态嵌套类（内部类）可以访问封闭类的其他成员，即使它们被声明为私有的也是如此。静态嵌套类无权访问封闭类的其他成员。</p> <blockquote> <p>Non-static nested classes (inner classes) have access to other members of the enclosing class, even if they are declared private. Static nested classes do not have access to other members of the enclosing class.</p> </blockquote> <p><code>InnerClass</code> 的实例只能存在于 <code>OuterClass</code> 的实例中，并且可以直接访问其封闭实例的方法和字段。要实例化内部类，必须首先实例化外部类。</p> <blockquote> <p>An instance of <code>InnerClass</code> can exist only within an instance of <code>OuterClass</code> and has direct access to the methods and fields of its enclosing instance. To instantiate an inner class, you must first instantiate the outer class. </p> </blockquote> <div class=highlight><pre><span></span><code><span class=c1>// 实例化内部类的语法</span>
<span class=n>OuterClass</span><span class=p>.</span><span class=na>InnerClass</span> <span class=n>innerObject</span> <span class=o>=</span> <span class=n>outerObject</span><span class=p>.</span><span class=na>new</span> <span class=nf>InnerClass</span><span class=p>();</span>
</code></pre></div> <p><a href=https://docs.oracle.com/javase/tutorial/java/javaOO/localclasses.html>Local Class</a> 和 <a href=https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html>Anonymous Class</a> 是两种典型的内部类。</p> <h4 id=local-class>Local Class 摘要<a class=headerlink href=#local-class title="Permanent link">&para;</a></h4> <p>starting in Java SE 8, a local class can access local variables and parameters of the enclosing block that are final or <em>effectively final</em>. A variable or parameter whose value is never changed after it is initialized is effectively final.</p> <p>从 Java SE 8 开始，如果在方法中声明了内部类，则它可以访问该方法的参数。</p> <blockquote> <p>Starting in Java SE 8, if you declare the local class in a method, it can access the method's parameters. </p> </blockquote> <p>静态方法中的内部类只能引用外部类的静态成员。</p> <blockquote> <p>Local classes in static methods can only refer to static members of the enclosing class.</p> </blockquote> <p>局部类是非静态的，因为它们可以访问封闭块的实例成员。因此，它们不能包含大多数静态声明。</p> <blockquote> <p>Local classes are non-static because they have access to instance members of the enclosing block. Consequently, they cannot contain most kinds of static declarations.</p> </blockquote> <p>您不能在块内声明接口；接口本质上是静态的。</p> <blockquote> <p>You cannot declare an interface inside a block; interfaces are inherently static.</p> </blockquote> <p>您不能在本地类中声明静态初始化器或成员接口。</p> <blockquote> <p>You cannot declare static initializers or member interfaces in a local class.</p> </blockquote> <p>本地类可以具有静态成员，前提是它们是常量变量。</p> <blockquote> <p>A local class can have static members provided that they are constant variables.</p> </blockquote> <h4 id=anonymous-class>Anonymous Class 摘要<a class=headerlink href=#anonymous-class title="Permanent link">&para;</a></h4> <p>匿名类可以访问其外部类的成员。</p> <blockquote> <p>An anonymous class has access to the members of its enclosing class.</p> </blockquote> <p>匿名类无法在其封闭范围内访问未声明为 final 或 effectively final 的局部变量。</p> <blockquote> <p>An anonymous class cannot access local variables in its enclosing scope that are not declared as <code>final</code> or effectively final.</p> </blockquote> <p>您不能在匿名类中声明静态初始化器或成员接口。</p> <blockquote> <p>You cannot declare static initializers or member interfaces in an anonymous class.</p> </blockquote> <p>匿名类可以具有静态成员，前提是它们是常量变量。</p> <blockquote> <p>An anonymous class can have static members provided that they are constant variables.</p> </blockquote> <p>您不能在匿名类中声明构造函数。</p> <blockquote> <p>you cannot declare constructors in an anonymous class.</p> </blockquote> <p>您可以在匿名类中声明以下内容：</p> <ul> <li>Fields // 字段</li> <li>Extra methods (even if they do not implement any methods of the supertype)</li> <li>Instance initializers // 实例初始化器</li> <li>Local classes // 内部类</li> </ul> <h3 id=_3>字段修饰符<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <ul> <li>public：所有的 class 均可访问。</li> <li>protected：同一 package 的 class 可访问，且不同包内的子类可访问。</li> <li>friendly 或 没有修饰符：同一 package 的 class 可访问，且不同包内的子类不可访问。</li> <li>private：仅本类可访问。</li> <li>final：常量，不可重新赋值。</li> <li>static：静态变量。</li> <li>transient：为系统保留，暂无特别作用。</li> <li>volatile：可同时被几个线程控制和修改。</li> </ul> <h3 id=_4>方法修饰符<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <ul> <li>public：所有的 class 均可访问。</li> <li>protected：同一 package 的 class 可访问，且不同包内的子类可访问。</li> <li>friendly 或 没有修饰符：同一 package 的 class 可访问，且不同包内的子类不可访问。</li> <li>private：仅本类可访问。</li> <li>final：不可重载。</li> <li>static：静态方法。</li> <li>synchronize：在多个线程中，该修饰符用于在运行前，对方法加锁，以防止其他线程的访问，运行结束后解锁。</li> <li>native，本地修饰符。指定此方法的方法体是用其他语言在程序外部编写的。</li> </ul> <h2 id=lambda>Lambda 表达式<a class=headerlink href=#lambda title="Permanent link">&para;</a></h2> <p><a href=https://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html>JDK 8 新特性</a></p> <p><a href=https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html>Lambda 表达式</a></p> <p>Lambda 表达式，也可称为闭包。</p> <p>Lambda 允许把函数作为一个方法的参数。</p> <div class=highlight><pre><span></span><code><span class=c1>// Lambda 表达式语法</span>
<span class=p>(</span><span class=n>parameters</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>expression</span>
<span class=c1>// 或者</span>
<span class=p>(</span><span class=n>parameters</span><span class=p>)</span> <span class=o>-&gt;</span><span class=p>{</span> <span class=n>statements</span><span class=p>;</span> <span class=p>}</span>
</code></pre></div> <p>lambda 表达式只能引用final 或 effectively final 的外层局部变量，这就是说不能在 lambda 内部修改定义在域外的局部变量，否则会编译错误。</p> <h2 id=_5>方法链接<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <blockquote> <p>Method Chaining</p> </blockquote> <p>每个方法都返回一个对象，使调用可以在单个语句中链接在一起，而无需使用变量来存储中间结果。</p> <blockquote> <p>Each method returns an object, allowing the calls to be chained together in a single statement without requiring variables to store the intermediate results.</p> </blockquote> <div class=highlight><pre><span></span><code><span class=n>String</span> <span class=n>value</span> <span class=o>=</span> <span class=n>Charset</span><span class=p>.</span><span class=na>defaultCharset</span><span class=p>().</span><span class=na>decode</span><span class=p>(</span><span class=n>buf</span><span class=p>).</span><span class=na>toString</span><span class=p>();</span>
<span class=n>UserPrincipal</span> <span class=n>group</span> <span class=o>=</span>
    <span class=n>file</span><span class=p>.</span><span class=na>getFileSystem</span><span class=p>().</span><span class=na>getUserPrincipalLookupService</span><span class=p>().</span>
         <span class=n>lookupPrincipalByName</span><span class=p>(</span><span class=s>&quot;me&quot;</span><span class=p>);</span>
</code></pre></div> <p>该技术可生成紧凑的代码，避免声明不需要的临时变量。</p> <h2 id=_6>任意参数个数<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <blockquote> <p>Arbitrary Number of Arguments</p> </blockquote> <p>参考 <a href=https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html#varargs>Arbitrary Number of Arguments</a></p> <p><code>varargs</code> 的构造将任意数量的值传递给方法。 当不知道将多少种特定类型的参数传递给方法时，可以使用 <code>varargs</code> 。 这是手动创建数组的方式。</p> <p>使用 <code>varargs</code> 时，要在最后一个参数的类型后加上省略号（三个点，...），然后是空格和参数名称。然后可以使用任意数量的该参数（包括无）调用该方法。</p> <div class=highlight><pre><span></span><code><span class=c1>// 在方法内部，corners 被视为数组。</span>
<span class=c1>// 可以使用数组或参数序列调用该方法。</span>
<span class=c1>// 在任何一种情况下，方法主体中的代码均会将参数视为数组。</span>
<span class=kd>public</span> <span class=n>Polygon</span> <span class=nf>polygonFrom</span><span class=p>(</span><span class=n>Point</span><span class=p>...</span> <span class=n>corners</span><span class=p>)</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>numberOfSides</span> <span class=o>=</span> <span class=n>corners</span><span class=p>.</span><span class=na>length</span><span class=p>;</span>
    <span class=kt>double</span> <span class=n>squareOfSide1</span><span class=p>,</span> <span class=n>lengthOfSide1</span><span class=p>;</span>
    <span class=n>squareOfSide1</span> <span class=o>=</span> <span class=p>(</span><span class=n>corners</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>.</span><span class=na>x</span> <span class=o>-</span> <span class=n>corners</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>.</span><span class=na>x</span><span class=p>)</span>
                     <span class=o>*</span> <span class=p>(</span><span class=n>corners</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>.</span><span class=na>x</span> <span class=o>-</span> <span class=n>corners</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>.</span><span class=na>x</span><span class=p>)</span> 
                     <span class=o>+</span> <span class=p>(</span><span class=n>corners</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>.</span><span class=na>y</span> <span class=o>-</span> <span class=n>corners</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>.</span><span class=na>y</span><span class=p>)</span>
                     <span class=o>*</span> <span class=p>(</span><span class=n>corners</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>.</span><span class=na>y</span> <span class=o>-</span> <span class=n>corners</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>.</span><span class=na>y</span><span class=p>);</span>
    <span class=n>lengthOfSide1</span> <span class=o>=</span> <span class=n>Math</span><span class=p>.</span><span class=na>sqrt</span><span class=p>(</span><span class=n>squareOfSide1</span><span class=p>);</span>

    <span class=c1>// more method body code follows that creates and returns a </span>
    <span class=c1>// polygon connecting the Points</span>
<span class=p>}</span>
</code></pre></div> <p>通常会在打印方法中看到 <code>varargs</code> 。例如，此 <code>printf</code> 方法：</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=n>PrintStream</span> <span class=nf>printf</span><span class=p>(</span><span class=n>String</span> <span class=n>format</span><span class=p>,</span> <span class=n>Object</span><span class=p>...</span> <span class=n>args</span><span class=p>)</span>
</code></pre></div> <p>允许打印任意数量的对象。可以这样调用：</p> <div class=highlight><pre><span></span><code><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>printf</span><span class=p>(</span><span class=s>&quot;%s: %d, %s%n&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>idnum</span><span class=p>,</span> <span class=n>address</span><span class=p>);</span>
<span class=c1>// 或者</span>
<span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>printf</span><span class=p>(</span><span class=s>&quot;%s: %d, %s, %s, %s%n&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>idnum</span><span class=p>,</span> <span class=n>address</span><span class=p>,</span> <span class=n>phone</span><span class=p>,</span> <span class=n>email</span><span class=p>);</span>
<span class=c1>// 或使用其他数量的参数</span>
</code></pre></div> <h2 id=_7>方法引用<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p><a href=https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html>方法引用</a></p> <h3 id=_8>引用静态方法<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1>// 常规的写法</span>
<span class=n>Arrays</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>rosterAsArray</span><span class=p>,</span>
    <span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Person</span><span class=p>.</span><span class=na>compareByAge</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
<span class=p>);</span>
<span class=c1>// 引用静态方法的写法</span>
<span class=n>Arrays</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>rosterAsArray</span><span class=p>,</span> <span class=n>Person</span><span class=p>::</span><span class=n>compareByAge</span><span class=p>);</span>
<span class=c1>// 方法引用Person :: compareByAge在语义上与lambda表达式（a，b）-&gt; Person.compareByAge（a，b）相同。</span>
</code></pre></div> <h3 id=_9>引用特定对象的实例方法<a class=headerlink href=#_9 title="Permanent link">&para;</a></h3> <p>The following is an example of a reference to an instance method of an arbitrary object of a particular type:</p> <div class=highlight><pre><span></span><code><span class=n>String</span><span class=o>[]</span> <span class=n>stringArray</span> <span class=o>=</span> <span class=p>{</span> <span class=s>&quot;Barbara&quot;</span><span class=p>,</span> <span class=s>&quot;James&quot;</span><span class=p>,</span> <span class=s>&quot;Mary&quot;</span><span class=p>,</span> <span class=s>&quot;John&quot;</span><span class=p>,</span>
    <span class=s>&quot;Patricia&quot;</span><span class=p>,</span> <span class=s>&quot;Robert&quot;</span><span class=p>,</span> <span class=s>&quot;Michael&quot;</span><span class=p>,</span> <span class=s>&quot;Linda&quot;</span> <span class=p>};</span>
<span class=n>Arrays</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>stringArray</span><span class=p>,</span> <span class=n>String</span><span class=p>::</span><span class=n>compareToIgnoreCase</span><span class=p>);</span>
</code></pre></div> <p>The equivalent lambda expression for the method reference <code>String::compareToIgnoreCase</code> would have the formal parameter list <code>(String a, String b)</code>, where <code>a</code> and <code>b</code> are arbitrary names used to better describe this example. The method reference would invoke the method <code>a.compareToIgnoreCase(b)</code>.</p> <h3 id=_10>引用构造函数<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p>You can reference a constructor in the same way as a static method by using the name <code>new</code>. The following method copies elements from one collection to another:</p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>T</span><span class=p>,</span> <span class=n>SOURCE</span> <span class=kd>extends</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>DEST</span> <span class=kd>extends</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;&gt;</span>
    <span class=n>DEST</span> <span class=nf>transferElements</span><span class=p>(</span>
        <span class=n>SOURCE</span> <span class=n>sourceCollection</span><span class=p>,</span>
        <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>DEST</span><span class=o>&gt;</span> <span class=n>collectionFactory</span><span class=p>)</span> <span class=p>{</span>

        <span class=n>DEST</span> <span class=n>result</span> <span class=o>=</span> <span class=n>collectionFactory</span><span class=p>.</span><span class=na>get</span><span class=p>();</span>
        <span class=k>for</span> <span class=p>(</span><span class=n>T</span> <span class=n>t</span> <span class=p>:</span> <span class=n>sourceCollection</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>result</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>The functional interface <code>Supplier</code> contains one method <code>get</code> that takes no arguments and returns an object. Consequently, you can invoke the method <code>transferElements</code> with a lambda expression as follows:</p> <div class=highlight><pre><span></span><code><span class=n>Set</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>rosterSetLambda</span> <span class=o>=</span>
    <span class=n>transferElements</span><span class=p>(</span><span class=n>roster</span><span class=p>,</span> <span class=p>()</span> <span class=o>-&gt;</span> <span class=p>{</span> <span class=k>return</span> <span class=k>new</span> <span class=n>HashSet</span><span class=o>&lt;&gt;</span><span class=p>();</span> <span class=p>});</span>
</code></pre></div> <p>You can use a constructor reference in place of the lambda expression as follows:</p> <div class=highlight><pre><span></span><code><span class=n>Set</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>rosterSet</span> <span class=o>=</span> <span class=n>transferElements</span><span class=p>(</span><span class=n>roster</span><span class=p>,</span> <span class=n>HashSet</span><span class=p>::</span><span class=k>new</span><span class=p>);</span>
</code></pre></div> <p>The Java compiler infers that you want to create a <code>HashSet</code> collection that contains elements of type <code>Person</code>. Alternatively, you can specify this as follows:</p> <div class=highlight><pre><span></span><code><span class=n>Set</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>rosterSet</span> <span class=o>=</span> <span class=n>transferElements</span><span class=p>(</span><span class=n>roster</span><span class=p>,</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span><span class=p>::</span><span class=k>new</span><span class=p>);</span>
</code></pre></div> <h2 id=package>Package 摘要<a class=headerlink href=#package title="Permanent link">&para;</a></h2> <p><a href=https://docs.oracle.com/javase/tutorial/java/package/index.html>Package</a></p> <p>程序包是一组相关类型的组合，提供访问保护和名称空间管理。</p> <blockquote> <p>A package is a grouping of related types providing access protection and name space management. </p> </blockquote> <p>Java 语言包本身以 <code>java</code> 或 <code>javax</code> 开头。</p> <h3 id=package_1>使用 package 的代码组织形式<a class=headerlink href=#package_1 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1>//in the Draggable.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Draggable</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>

<span class=c1>//in the Graphic.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Graphic</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>

<span class=c1>//in the Circle.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Circle</span> <span class=kd>extends</span> <span class=n>Graphic</span>
    <span class=kd>implements</span> <span class=n>Draggable</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>

<span class=c1>//in the Rectangle.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Rectangle</span> <span class=kd>extends</span> <span class=n>Graphic</span>
    <span class=kd>implements</span> <span class=n>Draggable</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>

<span class=c1>//in the Point.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Point</span> <span class=kd>extends</span> <span class=n>Graphic</span>
    <span class=kd>implements</span> <span class=n>Draggable</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>

<span class=c1>//in the Line.java file</span>
<span class=kn>package</span> <span class=nn>graphics</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Line</span> <span class=kd>extends</span> <span class=n>Graphic</span>
    <span class=kd>implements</span> <span class=n>Draggable</span> <span class=p>{</span>
    <span class=p>.</span> <span class=p>.</span> <span class=p>.</span>
<span class=p>}</span>
</code></pre></div> <h3 id=package_2>使用 package 的成员<a class=headerlink href=#package_2 title="Permanent link">&para;</a></h3> <p>为了方便起见，Java 编译器为每个源文件自动导入两个完整的包：</p> <ol> <li> <p><code>Java.lang</code> 包</p> </li> <li> <p>当前包（当前文件的包）。</p> </li> </ol> <p>To use a <code>public</code> package member from outside its package, you must do one of the following:</p> <ul> <li>Refer to the member by its fully qualified name</li> </ul> <div class=highlight><pre><span></span><code><span class=n>graphics</span><span class=p>.</span><span class=na>Rectangle</span> <span class=n>myRect</span> <span class=o>=</span> <span class=k>new</span> <span class=n>graphics</span><span class=p>.</span><span class=na>Rectangle</span><span class=p>();</span>
</code></pre></div> <ul> <li>Import the package member</li> </ul> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>graphics.Rectangle</span><span class=p>;</span>
<span class=n>Rectangle</span> <span class=n>myRectangle</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Rectangle</span><span class=p>();</span>
</code></pre></div> <ul> <li>Import the member's entire package</li> </ul> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>graphics.*</span><span class=p>;</span>
<span class=n>Circle</span> <span class=n>myCircle</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Circle</span><span class=p>();</span>
<span class=n>Rectangle</span> <span class=n>myRectangle</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Rectangle</span><span class=p>();</span>
</code></pre></div> <p>使用 <code>import</code> 语句，一般只能导入包中的一个成员或整个包。</p> <p>但有两种特殊情况：</p> <ul> <li>可以导入封闭类的公共嵌套类。</li> </ul> <p>例如，如果 <code>graphics.Rectangle</code> 类包含有用的嵌套类，例如 <code>Rectangle.DoubleWide</code> 和 <code>Rectangle.Square</code> ，则可以使用以下两条语句导入 Rectangle 及其嵌套类。</p> <p><div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>graphics.Rectangle</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>graphics.Rectangle.*</span><span class=p>;</span>  <span class=c1>// 这个 import 语句不会导入 Rectangle</span>
</code></pre></div> - 使用 static import 语句导入要使用的常量和静态方法。</p> <p>例如， <code>JavaLang.Math</code> 类定义了 PI 常量和许多静态方法，包括计算正弦、余弦、切线、平方根、极大值、最小值、指数等的方法。</p> <div class=highlight><pre><span></span><code><span class=c1>// 在 javaLang.Math 里定义的常量和静态方法</span>
<span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>double</span> <span class=n>PI</span> 
    <span class=o>=</span> <span class=mf>3.141592653589793</span><span class=p>;</span>
<span class=kd>public</span> <span class=kd>static</span> <span class=kt>double</span> <span class=nf>cos</span><span class=p>(</span><span class=kt>double</span> <span class=n>a</span><span class=p>)</span>
<span class=p>{</span>
    <span class=p>...</span>
<span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1>// static import</span>
<span class=kn>import static</span> <span class=nn>java.lang.Math.PI</span><span class=p>;</span>  <span class=c1>// 只导入常量 PI</span>
<span class=kn>import static</span> <span class=nn>java.lang.Math.*</span><span class=p>;</span>  <span class=c1>// 导入全部常量和静态方法</span>
</code></pre></div> <h3 id=_11>当域名特殊时，包名的约定<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <p>在某些情况下，internet 域名可能不是有效的包名称。如果域名包含连字符或其他特殊字符，如果包名称以非法用作 Java 名称开头的数字或其他字符开头，或者包名称包含保留的 Java 关键字（如 <code>int</code> ），则可能发生这种情况。在这种情况下，建议的约定是添加下划线。例如：</p> <table> <thead> <tr> <th>Domain Name</th> <th>Package Name Prefix</th> </tr> </thead> <tbody> <tr> <td><code>hyphenated-name.example.org</code></td> <td><code>org.example.hyphenated_name</code></td> </tr> <tr> <td><code>example.int</code></td> <td><code>int_.example</code></td> </tr> <tr> <td><code>123name.example.com</code></td> <td><code>com.example._123name</code></td> </tr> </tbody> </table> <h3 id=_12>源文件组织方法<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>详见 <a href=https://docs.oracle.com/javase/tutorial/java/package/managingfiles.html>Managing Source and Class Files</a></p> <h2 id=glob>Glob 语法<a class=headerlink href=#glob title="Permanent link">&para;</a></h2> <p>详见 <code>FileSystem</code> 类中的 <a href=https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-><code>getPathMatcher</code></a> 方法。</p> <p><code>glob</code> 模式指定一个 <code>string</code> ，并且与其他字符串（例如目录或文件名）匹配。</p> <p>匹配规则：</p> <ul> <li>星号 <code>*</code> 匹配任意数量的字符（包括无字符）。</li> <li>两个星号 <code>**</code> 的作用类似于 <code>*</code> ，但跨越目录边界。此语法通常用于匹配完整路径。</li> <li>问号 <code>？</code>恰好匹配一个字符。</li> <li>花括号 <code>{}</code> 指定子模式的集合。例如：</li> <li><code>{sun,moon,stars}</code> 匹配 "sun", "moon" 或者 "stars"。</li> <li><code>{temp*,tmp*}</code> 匹配所有以 "temp" 或者 "tmp" 开头的字符串。</li> <li>方括号 <code>[]</code> 表示一组单个字符；或者，如果使用连字符（-），则表示一系列字符。</li> <li><code>[aeiou]</code> 匹配任何小写的元音。</li> <li><code>[0-9]</code> 匹配任何数字。</li> <li><code>[A-Z]</code> 匹配任何大写字母。</li> <li><code>[a-z,A-Z]</code> 匹配任何大写或小写字母。</li> <li>在方括号内, <code>*</code>, <code>?</code> 和 <code>\</code> 自己和自己匹配。</li> <li>所有其他字符和它自身匹配。</li> <li>要匹配 <code>*</code> 、<code>?</code> 或其他特殊字符，可以使用反斜杠字符 <code>\</code> 对其进行转义。例如：<code>\\</code> 匹配单个反斜杠，而 <code>\？</code> 匹配问号。</li> </ul> <h2 id=exception>Exception 摘要<a class=headerlink href=#exception title="Permanent link">&para;</a></h2> <p>一个 exception 对象包含了错误信息，包括错误类型和出错时的程序状态。</p> <blockquote> <p>An <em>exception object</em> contains information about the error, including its type and the state of the program when the error occurred. </p> </blockquote> <p>Creating an exception object and handing it to the runtime system is called <em>throwing an exception</em>.</p> <p>The runtime system searches the call stack for a method that contains a block of code that can handle the exception. This block of code is called an <em>exception handler</em>.</p> <p>An exception handler is considered appropriate if the type of the exception object thrown matches the type that can be handled by the handler.</p> <h3 id=exception_1>Exception 的种类<a class=headerlink href=#exception_1 title="Permanent link">&para;</a></h3> <ul> <li><em>checked exception</em> 例如： <em>java.io.FileNotFoundException</em></li> <li><em>error</em> 例如：<em>java.io.IOError</em></li> <li><em>runtime exception</em> 例如：<em>NullPointerException</em></li> </ul> <p>Errors and runtime exceptions are collectively known as <em>unchecked exceptions</em>.</p> <blockquote> <p>译：错误和运行时异常统称为未检查异常。</p> </blockquote> <p>代码示例</p> <div class=highlight><pre><span></span><code><span class=c1>// Note: This class will not compile yet.</span>
<span class=kn>import</span> <span class=nn>java.io.*</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.List</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=p>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ListOfNumbers</span> <span class=p>{</span>

    <span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span><span class=p>;</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>SIZE</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>

    <span class=kd>public</span> <span class=nf>ListOfNumbers</span> <span class=p>()</span> <span class=p>{</span>
        <span class=n>list</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=p>(</span><span class=n>SIZE</span><span class=p>);</span>
        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>SIZE</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=k>new</span> <span class=n>Integer</span><span class=p>(</span><span class=n>i</span><span class=p>));</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>writeList</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// The FileWriter constructor throws IOException, which must be caught.</span>
        <span class=n>PrintWriter</span> <span class=n>out</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PrintWriter</span><span class=p>(</span><span class=k>new</span> <span class=n>FileWriter</span><span class=p>(</span><span class=s>&quot;OutFile.txt&quot;</span><span class=p>));</span>

        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>SIZE</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
            <span class=c1>// The get(int) method throws IndexOutOfBoundsException, which must be caught.</span>
            <span class=n>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&quot;Value at: &quot;</span> <span class=o>+</span> <span class=n>i</span> <span class=o>+</span> <span class=s>&quot; = &quot;</span> <span class=o>+</span> <span class=n>list</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>i</span><span class=p>));</span>
        <span class=p>}</span>
        <span class=n>out</span><span class=p>.</span><span class=na>close</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>If you try to compile the <a href=https://docs.oracle.com/javase/tutorial/essential/exceptions/examples/ListOfNumbers.java><code>ListOfNumbers</code></a> class, the compiler prints an error message about the exception thrown by the <code>FileWriter</code> constructor. However, it does not display an error message about the exception thrown by <code>get</code>. The reason is that the exception thrown by the constructor, <code>IOException</code>, is a checked exception, and the one thrown by the <code>get</code> method, <code>IndexOutOfBoundsException</code>, is an unchecked exception.</p> <p>If a <code>catch</code> block handles more than one exception type, then the <code>catch</code> parameter is implicitly <code>final</code>. </p> <p>将清理代码放在 finally 块中始终是一个好的习惯，即使预期没有异常。</p> <p>如果 JVM 在执行 try 或 catch 代码时退出，则 finally 块可能不执行。同样，如果执行 try 或 catch 代码的线程被中断或终止，那么即使整个应用程序继续运行，finally 块也可能不会执行。</p> <h2 id=_13>泛型<a class=headerlink href=#_13 title="Permanent link">&para;</a></h2> <p>详见</p> <ul> <li> <p><a href=https://docs.oracle.com/javase/tutorial/java/generics/index.html>Java 泛型</a></p> </li> <li> <p><a href=https://docs.oracle.com/javase/tutorial/extra/generics/index.html>Java泛型-续</a></p> </li> </ul> <hr> <div class=md-source-date> <small> Last update: May 16, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.22b62ea4.min.js></script> <script src=../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.f6ebf1dc.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>
<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.1.7"><title>Flutter - Notes</title><link rel=stylesheet href=../../assets/stylesheets/main.4c7052ca.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#flutter class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title=Notes class="md-header-nav__button md-logo" aria-label=Notes> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Notes </span> <span class="md-header-nav__topic md-ellipsis"> Flutter </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class="md-tabs__link md-tabs__link--active"> Home </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Notes class="md-nav__button md-logo" aria-label=Notes> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class=md-nav__link> Home </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#cli class=md-nav__link> CLI </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 已知问题 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 备忘 </a> </li> <li class=md-nav__item> <a href=#hello-world class=md-nav__link> Hello World </a> </li> <li class=md-nav__item> <a href=#hello-world_1 class=md-nav__link> 更简洁的Hello World </a> </li> <li class=md-nav__item> <a href=#widget class=md-nav__link> 常用Widget </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 工程目录结构 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 把资源文件放到哪并且如何调用 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 如何在网络中加载图片 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 如何安装依赖包和包插件 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 存储在应用程序中全局有效的键值对 </a> </li> <li class=md-nav__item> <a href=#sqlite class=md-nav__link> 使用 SQLite </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 设置推送通知 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=flutter>Flutter<a class=headerlink href=#flutter title="Permanent link">&para;</a></h1> <h2 id=cli>CLI<a class=headerlink href=#cli title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>flutter doctor -v <span class=c1># 检查开发环境</span>
flutter create &lt;projectname&gt; <span class=c1># 创建项目 </span>
flutter run <span class=c1># 运行项目</span>
<span class=nb>export</span> <span class=nv>PUB_HOSTED_URL</span><span class=o>=</span>https://pub.flutter-io.cn  <span class=c1># 使用国内镜像</span>
<span class=nb>export</span> <span class=nv>FLUTTER_STORAGE_BASE_URL</span><span class=o>=</span>https://storage.flutter-io.cn <span class=c1># 使用国内镜像</span>
flutter pub global activate devtools <span class=c1># 全局下载开发者工具</span>
flutter pub global run devtools   <span class=c1># 启动开发者工具服务</span>
</code></pre></div> <p>每次启动你的 app 时，链接都会改变。如果重启 app 后，需要用新的 URL 链接来连接开发者工具。</p> <h2 id=_1>已知问题<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>当 Flutter 应用执行热重载时，用户的断点会被清除。</p> <h2 id=_2>备忘<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>在 Dart 语言中使用<code>_</code>下划线前缀标识符，会 <a href=https://dart.cn/guides/language/language-tour>强制其变成私有</a>。</p> <h2 id=hello-world>Hello World<a class=headerlink href=#hello-world title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=k>import</span> <span class=s1>&#39;package:flutter/material.dart&#39;</span><span class=p>;</span>

<span class=kt>void</span> <span class=n>main</span><span class=p>()</span> <span class=o>=&gt;</span> <span class=n>runApp</span><span class=p>(</span><span class=n>MyApp</span><span class=p>());</span>

<span class=kd>class</span> <span class=nc>MyApp</span> <span class=kd>extends</span> <span class=n>StatelessWidget</span> <span class=p>{</span>
  <span class=nd>@override</span>
  <span class=n>Widget</span> <span class=n>build</span><span class=p>(</span><span class=n>BuildContext</span> <span class=n>context</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>return</span> <span class=n>MaterialApp</span><span class=p>(</span>
      <span class=nl>title:</span> <span class=s1>&#39;Welcome to Flutter&#39;</span><span class=p>,</span>
      <span class=nl>home:</span> <span class=n>Scaffold</span><span class=p>(</span>
        <span class=nl>appBar:</span> <span class=n>AppBar</span><span class=p>(</span>
          <span class=nl>title:</span> <span class=n>Text</span><span class=p>(</span><span class=s1>&#39;Welcome to Flutter&#39;</span><span class=p>),</span>
        <span class=p>),</span>
        <span class=nl>body:</span> <span class=n>Center</span><span class=p>(</span>
          <span class=nl>child:</span> <span class=n>Text</span><span class=p>(</span><span class=s1>&#39;Hello World&#39;</span><span class=p>),</span>
        <span class=p>),</span>
      <span class=p>),</span>
    <span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <h2 id=hello-world_1>更简洁的Hello World<a class=headerlink href=#hello-world_1 title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=k>import</span> <span class=s1>&#39;package:flutter/material.dart&#39;</span><span class=p>;</span>

<span class=kt>void</span> <span class=n>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>runApp</span><span class=p>(</span>
    <span class=k>new</span> <span class=n>Center</span><span class=p>(</span>
      <span class=nl>child:</span> <span class=k>new</span> <span class=n>Text</span><span class=p>(</span>
        <span class=s1>&#39;Hello, world!&#39;</span><span class=p>,</span>
        <span class=nl>textDirection:</span> <span class=n>TextDirection</span><span class=p>.</span><span class=n>ltr</span><span class=p>,</span>
      <span class=p>),</span>
    <span class=p>),</span>
  <span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <h2 id=widget>常用Widget<a class=headerlink href=#widget title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.flutter.io/flutter/widgets/Text-class.html><code>Text</code></a>：该 widget 可让创建一个带格式的文本。</li> <li><a href=https://docs.flutter.io/flutter/widgets/Row-class.html><code>Row</code></a>、 <a href=https://docs.flutter.io/flutter/widgets/Column-class.html><code>Column</code></a>： 这些具有弹性空间的布局类Widget可让您在水平（Row）和垂直（Column）方向上创建灵活的布局。其设计是基于web开发中的Flexbox布局模型。</li> <li><a href=https://docs.flutter.io/flutter/widgets/Stack-class.html><code>Stack</code></a>： 取代线性布局 (和Android中的LinearLayout相似)，<a href=https://docs.flutter.io/flutter/widgets/Stack-class.html><code>Stack</code></a>允许子 widget 堆叠， 你可以使用 <a href=https://docs.flutter.io/flutter/widgets/Positioned-class.html><code>Positioned</code></a> 来定位他们相对于<code>Stack</code>的上下左右四条边的位置。Stacks是基于Web开发中的绝度定位（absolute positioning )布局模型设计的。</li> <li><a href=https://docs.flutter.io/flutter/widgets/Container-class.html><code>Container</code></a>： <a href=https://docs.flutter.io/flutter/widgets/Container-class.html><code>Container</code></a> 可让您创建矩形视觉元素。container 可以装饰为一个<a href=https://docs.flutter.io/flutter/painting/BoxDecoration-class.html><code>BoxDecoration</code></a>, 如 background、一个边框、或者一个阴影。 <a href=https://docs.flutter.io/flutter/widgets/Container-class.html><code>Container</code></a> 也可以具有边距（margins）、填充(padding)和应用于其大小的约束(constraints)。另外， <a href=https://docs.flutter.io/flutter/widgets/Container-class.html><code>Container</code></a>可以使用矩阵在三维空间中对其进行变换。</li> </ul> <h2 id=_3>工程目录结构<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>┬
└ projectname
  ┬
  ├ android      - 包含 Android 相关文件。
  ├ build        - 存储 iOS 和 Android 构建文件。
  ├ ios          - 包含 iOS 相关文件。
  ├ lib          - 包含外部可访问 Dart 源文件。
    ┬
    └ src        - 包含附加源文件。
    └ main.dart  - Flutter 程序入口和新应用程序的起点。当你创建 Flutter 工程的时候会自动生成这些文件。你从这里开始写 Dart 代码
  ├ test         - 包含自动测试文件。
  └ pubspec.yaml - 包含 Flutter 应用程序的元数据。这个文件相当于 React Native 里的 package.json 文件。
</code></pre></div> <h2 id=_4>把资源文件放到哪并且如何调用<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>一个 Flutter 资源就是打包到你应用程序里的一个文件并且在程序运行的时候可以访问。 Flutter 应用程序可以包含下述几种资源类型：</p> <ul> <li>静态数据比如 JSON 文件</li> <li>配置文件</li> <li>图标和图片 (JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP)</li> </ul> <p>Flutter 使用 <code>pubspec.yaml</code> 文件来确定应用程序中的资源。该文件在工程的根目录。</p> <div class=highlight><pre><span></span><code><span class=nt>flutter</span><span class=p>:</span>
  <span class=nt>assets</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assets/my_icon.png</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assets/background.png</span>
</code></pre></div> <h2 id=_5>如何在网络中加载图片<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>在 React Native，你可以在 <code>Image</code> 的 <code>source</code> 属性中设置 <code>uri</code> 和所需的尺寸。</p> <p>在 Flutter 中，使用 <code>Image.network</code> 构造函数来实现通过地址加载图片的操作。</p> <div class=highlight><pre><span></span><code><span class=c1>// Flutter</span>
<span class=nl>body:</span> <span class=n>Image</span><span class=p>.</span><span class=n>network</span><span class=p>(</span>
          <span class=s1>&#39;https://flutter.io/images/owl.jpg&#39;</span><span class=p>,</span>
</code></pre></div> <h2 id=_6>如何安装依赖包和包插件<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <p>在 Flutter 中，安装代码包需要按照如下的步骤：</p> <ul> <li>在 <code>pubspec.yaml</code> 的 dependencies 区域添加包名和版本。下面的例子向大家展示了如何将 <code>google_sign_in</code> 的 Dart package 添加到 <code>pubspec.yaml</code> 中。一定要检查一下 YAML 文件中的空格。因为 <strong>空格很重要</strong>!</li> </ul> <div class=highlight><pre><span></span><code><span class=nt>dependencies</span><span class=p>:</span>
  <span class=nt>flutter</span><span class=p>:</span>
    <span class=nt>sdk</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">flutter</span>
  <span class=nt>google_sign_in</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">^3.0.3</span>
</code></pre></div> <ul> <li> <p>在命令行中输入 <code>flutter packages get</code> 来安装代码包。如果使用 IDE，它自己会运行 <code>flutter packages get</code>，或者它会提示你是不是要运行该命令。</p> </li> <li> <p>向下面代码一样在程序中引用代码包：</p> </li> </ul> <div class=highlight><pre><span></span><code><span class=k>import</span> <span class=s1>&#39;package:flutter/cupertino.dart&#39;</span><span class=p>;</span>
</code></pre></div> <p>如果想了解更多相关信息，请参考 <a href=https://flutter.cn/docs/development/packages-and-plugins/using-packages>在 Flutter 里使用 Packages</a> 和 <a href=https://flutter.cn/docs/development/packages-and-plugins/developing-packages>Flutter Packages 的开发和提交</a>。</p> <p>你可以找到很多 Flutter 开发者分享的代码包，就在 [<a href=https://pub.flutter-io.cn/flutter/ >Flutter packages</a> 的 <a href=https://pub.flutter-io.cn/ >pub.dev</a>.</p> <h2 id=_7>存储在应用程序中全局有效的键值对<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>在 Flutter 中，使用 <a href=https://github.com/flutter/plugins/tree/master/packages/shared_preferences><code>shared_preferences</code></a> 插件来存储和访问应用程序内全局有效的键值对数据。</p> <p><code>shared_preferences</code> 插件封装了 iOS 中的 <code>NSUserDefaults</code> 和 Android 中的 <code>SharedPreferences</code> 来实现简单数据的持续存储。如果要使用该插件，可以在 <code>pubspec.yaml</code> 中添加依赖 <code>shared_preferences</code>，然后在 Dart 文件中引用包即可。</p> <div class=highlight><pre><span></span><code><span class=c1># pubspec.yaml </span>
<span class=nt>dependencies</span><span class=p>:</span>
  <span class=nt>flutter</span><span class=p>:</span>
    <span class=nt>sdk</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">flutter</span>
  <span class=nt>shared_preferences</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">^0.4.3</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1>// Dart</span>
<span class=k>import</span> <span class=s1>&#39;package:shared_preferences/shared_preferences.dart&#39;</span><span class=p>;</span>
</code></pre></div> <p>要实现持久数据存储，使用 <code>SharedPreferences</code> 类提供的 setter 方法即可。 Setter 方法适用于多种原始类型数据，比如 <code>setInt</code>, <code>setBool</code>, 和 <code>setString</code>。要读取数据，使用 <code>SharedPreferences</code> 类中相应的 getter 方法。每一个 setter 方法都有对应的 getter 方法，比如，<code>getInt</code>, <code>getBool</code>, 和 <code>getString</code>。</p> <div class=highlight><pre><span></span><code><span class=c1>// Dart</span>
<span class=n>SharedPreferences</span> <span class=n>prefs</span> <span class=o>=</span> <span class=kd>await</span> <span class=n>SharedPreferences</span><span class=p>.</span><span class=n>getInstance</span><span class=p>();</span>
<span class=n>_counter</span> <span class=o>=</span> <span class=n>prefs</span><span class=p>.</span><span class=n>getInt</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>);</span>
<span class=n>prefs</span><span class=p>.</span><span class=n>setInt</span><span class=p>(</span><span class=s1>&#39;counter&#39;</span><span class=p>,</span> <span class=o>++</span><span class=n>_counter</span><span class=p>);</span>
<span class=n>setState</span><span class=p>(()</span> <span class=p>{</span>
  <span class=n>_counter</span> <span class=o>=</span> <span class=n>_counter</span><span class=p>;</span>
<span class=p>});</span>
</code></pre></div> <h2 id=sqlite>使用 SQLite<a class=headerlink href=#sqlite title="Permanent link">&para;</a></h2> <p>在 Flutter 中，使用 <a href=https://pub.flutter-io.cn/packages/sqflite>SQFlite</a> 插件实现此功能。</p> <h2 id=_8>设置推送通知<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>在 Flutter 中，使用 <a href=https://github.com/flutter/plugins/tree/master/packages/firebase_messaging>Firebase_Messaging</a> 插件实现此功能。请查阅 <a href=https://pub.flutter-io.cn/packages/firebase_messaging><code>firebase_messaging</code></a> 插件文档。</p> <hr> <div class=md-source-date> <small> Last update: May 16, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.22b62ea4.min.js></script> <script src=../../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.f6ebf1dc.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>